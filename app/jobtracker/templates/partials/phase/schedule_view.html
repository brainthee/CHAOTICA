{% load menu %}{% load static %}{% load crispy_forms_tags %}{% load index %}


<div class="row mb-3">
    <div class="col my-auto">
    </div>
    <div class="col-lg-4 text-end">
      <a href="{% url 'phase_schedule' phase.job.slug phase.slug %}" class="btn btn-phoenix-success">
          Edit Schedule
      </a> 
    </div>
</div>

<div class="card vh-100 card-calendar">
    <div class="card-body h-100 p-0">
        <div class="calendar h-100" data-bs-toggle="calendar" id="calendar"></div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');
    var calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'resourceTimelineMonth',
        themeSystem: 'bootstrap5',
        headerToolbar: {
            left: 'today prev,next',
            center: 'title',
            right: 'resourceTimelineTenDay,resourceTimelineMonth,resourceTimelineYear'
        },
        {% PyDateToJSDate phase.earliest_scheduled_date as earliest_scheduled_date %}
        {% if earliest_scheduled_date %}
        initialDate: '{{ earliest_scheduled_date }}',
        {% endif %}
        aspectRatio: 1.75,
        views: {
            resourceTimelineTenDay: {
                type: 'resourceTimeline',
                duration: { days: 10 },
                buttonText: '10 days'
            }
        },
        resourceAreaHeaderContent: 'Users',
        resources: '{% url 'view_phase_schedule_members' job.slug phase.slug %}',
        events: '{% url 'view_phase_schedule_slots' job.slug phase.slug %}',
        selectable: false,
        editable: false,
        droppable: false,
        nowIndicator: true
    });

    calendar.render();
});
</script>